@using Dul.Web
<h3>ArticlePager</h3>

<input type="button" name="name" value="1페이지" @onclick="@(() => PagerButtonClicked(1))" />
<input type="button" name="name" value="2페이지" @onclick="@(() => PagerButtonClicked(2))" />
<input type="button" name="name" value="3페이지" @onclick="@(() => PagerButtonClicked(3))" />
<input type="button" name="name" value="4페이지" @onclick="@(() => PagerButtonClicked(4))" />
@code {

    // 부모로부터 모든 페이지 관련된 정보가 담김 pageBase 개체 받음
    [Parameter]
    public PagerBase Model { get; set; }


    protected override Task OnParametersSetAsync()
    {
        Model.PageCount = Convert.ToInt32(Math.Ceiling(Model.RecordCount / (double)Model.PageSize));
        return base.OnParametersSetAsync();
    }

    [Parameter]
    public EventCallback<int> PageIndexChanged { get; set; }

    //Pager 버튼을 클릭할 때 현재 페이지 번호를 받아서 부모에게 전달
    private void PagerButtonClicked(int pageNumber)
    {
        Model.PageNumber = pageNumber;
        Model.PageIndex = pageNumber - 1 ;

        PageIndexChanged.InvokeAsync(pageNumber - 1); // PageIndex를 부모 창으로 전송
    }


}
